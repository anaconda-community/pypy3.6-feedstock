
diff -r aaf8d1b42579 lib-python/3/sysconfig.py
--- a/lib-python/3/sysconfig.py	Mon Oct 10 20:13:52 2022 +0200
+++ b/lib-python/3/sysconfig.py	Wed Oct 12 13:02:43 2022 +0300
@@ -441,15 +441,18 @@
 
 def _init_posix(vars):
     """Initialize the module as appropriate for POSIX systems."""
-    # CPython: _sysconfigdata_* is generated at build time, see _generate_posix_vars()
-    # name = _get_sysconfigdata_name()
-    # PyPy: _sysconfigdata is a dynamic module (uses sys to determine values),
-    #       while _sysconfigdata_* is a static version of the same values
-    #       generated by calling _generate_posix_vars as part of packaging.py.
-    #       To prevent chicken-and-egg problems of needing the values before
-    #       generating them, use the dynamic version here.
-    name = os.environ.get('_PYTHON_SYSCONFIGDATA_NAME', '_sysconfigdata')
-    _temp = __import__(name, globals(), locals(), ['build_time_vars'], 0)
+    name = _get_sysconfigdata_name()
+    try:
+        _temp = __import__(name, globals(), locals(), ['build_time_vars'], 0)
+    except ModuleNotFoundError as e:
+        # either someone set _PYTHON_SYSCONFIGDATA_NAME wrong, or we have not
+        # called main() yet
+        name2 = os.environ.get('_PYTHON_SYSCONFIGDATA_NAME', '_sysconfigdata')
+        try:
+            _temp = __import__(name2, globals(), locals(), ['build_time_vars'], 0)
+        except ModuleNotFoundError:
+            raise e from None
+        
     build_time_vars = _temp.build_time_vars
     vars.update(build_time_vars)
 

